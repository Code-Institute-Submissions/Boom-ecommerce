<!DOCTYPE html>
{% extends "base.html" %}
{% load static from staticfiles %}
{% load bootstrap_tags %}


{% block content %}
    <!--<div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" style="max-height:560px;" src="static/img/carousel/checkout.jpeg" alt="First slide">
            </div>
        </div>
    </div>
    Breadcrumbs 
    <div class="breadcrumbs d-flex flex-row align-items-center">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="{% url 'checkout' %}"><i class="fa fa-angle-right" aria-hidden="true"></i>Checkout</a></li>
            
        </ul>
    </div>
    <div class="new_arrivals">
		<div class="container">
			<div class="row">
				<div class="col text-center">
					<div class="section_title new_arrivals_title">
						<h2>Checkout</h2>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="product-grid" data-isotope='{ "itemSelector": ".product-item", "layoutMode": "fitRows" }'>
                    {% for item in cart_items %}
						<div class="product-item" >
                            <div class="product product_filter">
                                <div class="product_image">
                                    <img src="{{ MEDIA_URL }}{{ item.product.image }}" alt="">
                                </div>
                                <div class="product_info">
                                    <h6 class="product_name">{{ item.product.name }}</h6>
                                    <div class="product_price">{{ item.product.price }}</div>
                                    <p>Quantity: {{ item.quantity }}</p>
                                </div>
                            </div>
						</div>
                    {% endfor %}    
					</div>
				</div>
			</div>
		</div>
	</div>

     Payment section 
	<div class="newsletter">
		<div class="container">
			<div class="row">
				<div class="col-lg-6">
					<div class="newsletter_text d-flex flex-column justify-content-center align-items-lg-start align-items-md-center text-center">
						<h4>Payment Details</h4>
					</div>
				</div>
				<div class="col-lg-6">
                    <h4>Total: <span class="glyphicon glyphicon-euro" aria-hidden="true"></span>{{ total }}</h4>
				</div>
			</div>
            <div class="row">
                <div class="col-lg-6">
					<div class="newsletter_text d-flex flex-column justify-content-center align-items-lg-start align-items-md-center text-center">
						<form role="form" method="post" id="payment-form" action="{% url 'checkout' %}">

                            <div id="credit-card-errors" style="display: none;">
                                <div id="alert-message block-message error" id="stripe-error-message"></div>
                            </div>

                            <div class="form-group col-md-6">
                                {{ order_form | as_bootstrap }}
                            </div>

                            <div class="form-group col-md-6">
                                {{ payment_form | as_bootstrap }}
                            </div>

                            {% csrf_token %}
                            <div class="form-group col-md-12">
                                <input class=" red_button " id="submit_payment_btn" name="commit" type="submit" value="Submit Payment">
                            </div>
                        </form>
					</div>
				</div>
            </div>
		</div>
	</div>-->
    <script src="https://js.stripe.com/v3/"></script>

    {% autoescape off %}
        <script>
            var stripe = Stripe('{{STRIPE_PUBLISHABLE}}');
            stripe.redirectToCheckout({
                sessionId: '{{session_id}}'
            }).then(function(result) {
                // If `redirectToCheckout` fails due to a browser or network
                // error, display the localized error message to your customer
                // using `result.error.message`.
            });
        </script>
    {% endautoescape %}
{% endblock %}